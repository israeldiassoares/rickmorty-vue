import{d as h}from"./vendor-7f2756c0.js";const a="https://rickandmortyapi.com/api",n=h("character",{state:()=>({characters:[{info:{count:0,pages:0,next:null,prev:null},results:{id:0,name:"",status:"",species:"",type:"",gender:"",origin:{name:"",url:""},location:{name:"",url:""},image:"",episode:[""],url:"",created:""}}],character:{id:Number,name:"",image:"",type:"",status:"",episode:[]},queryParam:"",text:"",pages:0,nextPageURL:null,prevPageURL:null,loading:!1,error:String}),getters:{getCharacters:e=>{let t;for(let r in e.characters)r=="results"&&(t=e.characters[r]);return t},getCurrentNumberPage:e=>{var s,i;let t=Number((s=e.nextPageURL)==null?void 0:s.match(/\d/)),r=String((i=e.prevPageURL)==null?void 0:i.match(/\d/));return t===2&&r==""?1:t-1},getPrevPagination:e=>{for(let t in e.characters)if(t=="info")return e.characters[t]},getCharacterDetails:e=>e.character,getQuantityPage(e){return e.pages}},actions:{async fetchCharacters(){this.loading=!0;try{this.characters=await fetch(`${a}/character`).then(e=>e.json()),this.setNextPageURL(),this.setPrevPageURL()}catch(e){this.error=e}finally{this.loading=!1}},async getAllOrFiltredResult(){let e="/([aA-zZ])w+/g";if(this.queryParam.match(e)&&this.text.match(e)){debugger;await this.getFilteredCharacter()}else await this.fetchCharacters();this.setQuantityPage()},async fetchCharacterById(e){localStorage.setItem("charID",String(e)),this.loading=!0;try{return this.character=await fetch(`${a}/character/${e}`).then(t=>t.json())}catch(t){this.error=t}finally{this.loading=!1}},async retrieveSelectedCharacter(){const e=localStorage==null?void 0:localStorage.getItem("charID");e!==null&&this.character.id==null&&(console.log("recupera if"),await this.fetchCharacterById(Number(e)))},async getFilteredCharacter(){this.loading=!0;try{this.characters=await fetch(`${a}/character/?${this.queryParam}=${this.text}`).then(e=>e.json())}catch(e){this.error=e}finally{this.loading=!1}},async getNextPageData(){console.log("getNextPAge",this.nextPageURL);try{if(this.nextPageURL!==null){let e=await fetch(`${this.nextPageURL}`).then(t=>t.json());this.setNextPageURL(),this.setPrevPageURL(),this.characters=e}}catch(e){this.error=e}finally{this.loading=!1}},async getPrevPageData(){console.log("getNextPAge",this.nextPageURL);try{if(this.prevPageURL!==null){let e=await fetch(`${this.prevPageURL}`).then(t=>t.json());this.setNextPageURL(),this.setPrevPageURL(),this.characters=e}}catch(e){this.error=e}finally{this.loading=!1}},setSelectedParam(e){return this.queryParam=e},setTextSearch(e){return this.text=e},setQuantityPage(){let e;for(let t in this.characters)t=="info"&&(e=t);return this.pages=Number(e.pages)},setNextPageURL(){let e={};for(let t in this.characters)t=="info"&&(e=t);return this.nextPageURL=e},setPrevPageURL(){let e={};for(let t in this.characters)t=="info"&&(e=t);return this.prevPageURL=e}}});export{n as u};
